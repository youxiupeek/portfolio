<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JOYCE ZHANG | Director Portfolio</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,500;0,600;1,400&display=swap"
    rel="stylesheet"
  />

  <style>
    :root {
      --bg-color: #fcfbf9;
      --bg-secondary: #f4f1ea;
      --text-main: #1a1a1a;
      --text-sub: #7a7570;
      --accent: #b03a3a;
      --font-serif: "Playfair Display", serif;
      --font-sans: "Lato", sans-serif;
      --font-script: "Courier Prime", monospace;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    html {
      scroll-behavior: smooth;
      cursor: crosshair;
    }

    ::selection {
      background: var(--accent);
      color: #fff;
    }
    ::-moz-selection {
      background: var(--accent);
      color: #fff;
    }

    body {
      background-color: var(--bg-color);
      color: var(--text-main);
      font-family: var(--font-sans);
      line-height: 1.8;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
    }

    body::after {
      content: "";
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
      pointer-events: none;
      z-index: 9998;
    }

    a { text-decoration: none; color: inherit; transition: all 0.3s ease; cursor: pointer; }

    .reveal {
      opacity: 0;
      transform: translateY(40px);
      transition: all 1s cubic-bezier(0.2, 1, 0.3, 1);
    }
    .reveal.active {
      opacity: 1;
      transform: translateY(0);
    }

    nav {
      position: fixed;
      top: 0; width: 100%;
      padding: 25px 6%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 1000;
      background: rgba(252, 251, 249, 0.85); 
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(0,0,0,0.03);
      transition: transform 0.3s ease;
    }

    .logo {
      font-family: var(--font-serif);
      font-size: 1.3rem;
      font-weight: 600;
      letter-spacing: 2px;
      color: #000;
    }

    .menu { display: flex; gap: 30px; }
    .menu a {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: var(--text-sub);
      font-weight: 500;
      position: relative;
    }
    .menu a::after {
      content: ''; position: absolute; bottom: -4px; left: 0; width: 0%; height: 1px;
      background: var(--text-main); transition: width 0.3s ease;
    }
    .menu a:hover { color: var(--text-main); }
    .menu a:hover::after { width: 100%; }

    header {
      height: 92vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 0 20px;
      position: relative;
    }

    .hero-title {
      font-family: var(--font-serif);
      font-size: 6.5vw;
      font-weight: 400;
      line-height: 1.1;
      margin-bottom: 25px;
      color: #111;
      opacity: 0;
      animation: fadeIn 1.2s ease-out forwards;
    }

    .hero-title em {
      font-family: var(--font-serif);
      font-style: italic;
      font-weight: 400;
      color: #444;
    }

    .hero-subtitle {
      font-size: 0.85rem;
      letter-spacing: 4px;
      text-transform: uppercase;
      color: var(--text-sub);
      opacity: 0;
      animation: fadeIn 1.2s ease-out 0.4s forwards;
    }

    .scroll-indicator {
      position: absolute;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      opacity: 0;
      animation: fadeIn 1s ease-out 1.5s forwards;
    }
    .scroll-text {
      font-size: 0.6rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 10px;
      color: var(--text-sub);
    }
    .scroll-line {
      width: 1px;
      height: 40px;
      background: rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
    }
    .scroll-line::after {
      content: "";
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      background: var(--accent);
      animation: scrollDown 2s cubic-bezier(0.77, 0, 0.175, 1) infinite;
    }

    @keyframes scrollDown {
      0% { transform: translateY(-100%); }
      100% { transform: translateY(100%); }
    }

    section { padding: 140px 8%; border-bottom: 1px solid rgba(0,0,0,0.03); }
    .section-header { margin-bottom: 90px; text-align: center; }
    .section-title {
      font-family: var(--font-serif);
      font-size: 3rem;
      font-weight: 400;
      margin-bottom: 15px;
      color: #111;
    }
    .section-desc {
      font-family: var(--font-sans);
      color: var(--text-sub);
      font-size: 0.95rem;
      font-style: italic;
      max-width: 500px;
      margin: 0 auto;
      line-height: 1.6;
    }

    .video-box {
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
      position: relative;
      padding-bottom: 56.25%; 
      height: 0;
      background: #000;
      overflow: hidden;
      border-radius: 0px;
      cursor: pointer;
      transition: transform 0.4s ease, box-shadow 0.4s ease;
    }

    .video-box:hover {
      transform: translateY(-5px);
      box-shadow: 0 35px 60px -12px rgba(0, 0, 0, 0.2);
    }

    .video-cover {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      object-fit: cover; transition: 0.4s ease; opacity: 0.9;
    }

    .video-box.is-playing .video-cover,
    .video-box.is-loading .video-cover { opacity: 0; pointer-events: none; }

    .yt-player {
      position: absolute; inset: 0; width: 100%; height: 100%;
      opacity: 0; pointer-events: none; z-index: 2; transition: opacity 0.3s;
    }
    .video-box.is-playing .yt-player { opacity: 1; pointer-events: auto; }

    .video-play-btn {
      position: absolute; top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 70px; height: 70px;
      border-radius: 50%;
      background: rgba(255,255,255,0.2);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255,255,255,0.4);
      color: #fff; font-size: 1.5rem;
      display: flex; align-items: center; justify-content: center;
      transition: 0.3s ease; z-index: 3; cursor: pointer;
    }
    .video-box:hover .video-play-btn {
      background: #fff; color: #000; transform: translate(-50%, -50%) scale(1.1);
    }
    .video-box.is-playing .video-play-btn,
    .video-box.is-loading .video-play-btn { opacity: 0; pointer-events: none; }

    #intro { background-color: #fff; }
    .intro-layout {
      display: grid;
      grid-template-columns: 1.2fr 0.8fr;
      gap: 60px;
      align-items: center;
    }
    .intro-text h3 {
      font-family: var(--font-serif);
      font-size: 2.2rem;
      margin-bottom: 20px;
      line-height: 1.2;
    }
    .intro-text p {
      font-size: 1rem;
      color: #555;
      margin-bottom: 30px;
      text-align: justify;
    }
    .signature {
      font-family: var(--font-script);
      font-size: 0.9rem;
      color: var(--text-sub);
      margin-top: 20px;
      display: block;
    }

    .film-item {
      display: grid;
      grid-template-columns: 1.5fr 1fr;
      gap: 60px;
      margin-bottom: 140px;
      align-items: center;
    }
    .film-item.reverse { grid-template-columns: 1fr 1.5fr; }
    .film-item.reverse .video-box { order: 2; }
    .film-item:last-child { margin-bottom: 0; }

    .film-info h3 {
      font-family: var(--font-serif);
      font-size: 2.2rem;
      margin-bottom: 10px;
      color: #1a1a1a;
    }
    .meta-tag {
      display: inline-block;
      font-size: 0.7rem;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--text-sub);
      border: 1px solid #ddd;
      padding: 5px 12px;
      border-radius: 50px;
      margin-bottom: 25px;
    }
    .film-info p { color: #555; margin-bottom: 25px; }
    .watch-link {
      font-size: 0.75rem; letter-spacing: 1px; text-transform: uppercase;
      border-bottom: 1px solid #aaa; padding-bottom: 3px;
    }
    .watch-link:hover { border-color: #000; color: #000; }

    #photography { background-color: var(--bg-secondary); }
    .photo-gallery-5 {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        gap: 15px;
        height: 800px;
    }
    .pg-item { position: relative; overflow: hidden; cursor: zoom-in; }
    
    .pg-item img { 
      width: 100%; height: 100%; object-fit: cover; 
      transition: transform 0.8s cubic-bezier(0.2, 1, 0.3, 1), filter 0.5s ease;
      filter: grayscale(100%); 
      display: block;
    }
    
    .pg-item::after {
      content: "";
      position: absolute;
      top: 15px; left: 15px; right: 15px; bottom: 15px;
      border: 1px solid rgba(255,255,255,0.0);
      transition: border-color 0.4s ease;
      pointer-events: none;
      z-index: 10;
    }
    .pg-item:hover::after {
      border-color: rgba(255,255,255,0.7);
    }
    .pg-item:hover img { 
      transform: scale(1.05); 
      filter: grayscale(0); 
    }

    .pg-item:nth-child(1) { grid-column: 1 / 5; grid-row: 1 / 3; } 
    .pg-item:nth-child(2) { grid-column: 5 / 7; grid-row: 1 / 3; } 
    .pg-item:nth-child(3) { grid-column: 1 / 3; grid-row: 3 / 5; } 
    .pg-item:nth-child(4) { grid-column: 3 / 5; grid-row: 3 / 5; }
    .pg-item:nth-child(5) { grid-column: 5 / 7; grid-row: 3 / 5; }


    #art { background-color: #fff; }
    .art-gallery { column-count: 3; column-gap: 30px; }
    .art-piece {
      margin-bottom: 30px; break-inside: avoid;
      background: transparent; transition: opacity 0.3s;
    }
    .art-piece img {
        width: 100%; display: block;
        box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        cursor: zoom-in;
    }
    .art-caption {
        padding-top: 10px;
        font-family: var(--font-sans);
        font-size: 0.75rem;
        color: #999;
        text-align: right;
    }

    #writing { background-color: var(--bg-color); }
    .script-container {
        max-width: 800px; margin: 0 auto;
        border-top: 1px solid #000;
        padding-top: 40px;
    }
    .script-header { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 40px; }
    .script-header h3 { font-family: var(--font-serif); font-size: 2rem; }
    
    .script-body {
        font-family: var(--font-script);
        font-size: 1.05rem;
        line-height: 2;
        color: #333;
        background: #fff;
        padding: 60px;
        box-shadow: 0 15px 40px rgba(0,0,0,0.04);
        position: relative;
    }
    .script-body::after {
        content: ""; position: absolute; bottom: 0; left: 0; width: 100%; height: 200px;
        background: linear-gradient(transparent, #fff);
    }

    .read-more-btn {
        display: table; margin: 30px auto 0;
        font-size: 0.8rem; letter-spacing: 2px;
        border-bottom: 1px solid transparent;
        cursor: pointer; transition: 0.3s;
    }
    .read-more-btn:hover { border-bottom-color: #000; }

    #script-modal {
        position: fixed; inset: 0; background: #fff; z-index: 9999;
        overflow-y: auto; padding: 100px 20px;
        transform: translateY(100%); transition: transform 0.6s cubic-bezier(0.85, 0, 0.15, 1);
    }
    #script-modal.active { transform: translateY(0); }
    .modal-close {
        position: fixed; top: 30px; right: 30px;
        font-size: 0.9rem; letter-spacing: 2px; cursor: pointer;
        padding: 10px 20px; border: 1px solid #eee; background: #fff;
        z-index: 10000;
    }
    .modal-close:hover { background: #000; color: #fff; border-color: #000; }
    .full-script { max-width: 700px; margin: 0 auto; font-family: var(--font-script); font-size: 1.1rem; padding-bottom: 100px; }

    #lightbox {
        position: fixed; inset: 0; background: rgba(10,10,10,0.98); z-index: 10001;
        display: none; justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s;
    }
    #lightbox.visible { opacity: 1; }
    #lightbox img { max-width: 90vw; max-height: 90vh; box-shadow: 0 0 50px rgba(0,0,0,0.3); }

    footer { padding: 80px 0; text-align: center; font-size: 0.7rem; color: #aaa; letter-spacing: 2px; }

    @media (max-width: 1024px) {
        .intro-layout, .film-item, .film-item.reverse { grid-template-columns: 1fr; gap: 30px; }
        .film-item.reverse .video-box { order: 0; }
        .photo-gallery-5 { height: auto; grid-template-columns: 1fr; grid-template-rows: auto; }
        .pg-item:nth-child(n) { grid-column: auto; grid-row: auto; height: 300px; }
        .art-gallery { column-count: 2; }
        .script-body { padding: 30px; }
    }
    @media (max-width: 768px) {
        .menu { display: none; }
        .hero-title { font-size: 14vw; }
        .art-gallery { column-count: 1; }
    }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>

<body>
  <nav>
    <div class="logo">JOYCE ZHANG</div>
    <div class="menu">
      <a href="#intro">Introduction</a>
      <a href="#films">Films</a>
      <a href="#photography">Photography</a>
      <a href="#art">Fine Arts</a>
      <a href="#writing">Writing</a>
    </div>
  </nav>

  <header>
    <h1 class="hero-title">Visual <em>Storyteller</em><br />& Director</h1>
    <div class="hero-subtitle">Portfolio 2025</div>
    
    <div class="scroll-indicator">
      <span class="scroll-text">Scroll</span>
      <div class="scroll-line"></div>
    </div>
  </header>

  <section id="intro" class="reveal">
    <div class="intro-layout">
      <div class="video-box" data-video-id="DIu0fWwwsnU" data-video-url="https://youtu.be/DIu0fWwwsnU">
        <div class="yt-player" aria-hidden="true"></div>
        <img
          src="data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1920 1080'%3E%3Crect width='100%25' height='100%25' fill='%23050505'/%3E%3Ctext x='50%25' y='48%25' dominant-baseline='middle' text-anchor='middle' font-family='Playfair Display, serif' font-size='80' fill='%23ffffff' letter-spacing='5px'%3EWHO I AM%3C/text%3E%3Ctext x='50%25' y='56%25' dominant-baseline='middle' text-anchor='middle' font-family='Lato, sans-serif' font-size='24' fill='%23888888' letter-spacing='8px' text-transform='uppercase'%3EJoyce Zhang%3C/text%3E%3C/svg%3E"
          alt="Who I Am - Joyce Zhang"
          class="video-cover"
          loading="lazy"
        />
        <button class="video-play-btn" type="button" aria-label="Play Introduction">▶</button>
      </div>

      <div class="intro-text">
        <h3>About Me</h3>
        <p>
          placeholder
        </p>
        <span class="signature">Joyce Zhang, 2025.</span>
      </div>
    </div>
  </section>

  <section id="films" class="reveal">
    <div class="section-header">
      <h2 class="section-title">Selected Films</h2>
      <p class="section-desc">Visual narratives exploring ritual, identity, and the subconscious.</p>
    </div>

    <div class="film-item">
      <div class="video-box" data-video-id="Mta2oElLeqY" data-video-url="https://youtu.be/Mta2oElLeqY">
        <div class="yt-player" aria-hidden="true"></div>
        <img src="cover_last_rite.jpg" alt="The Last Rite" class="video-cover" loading="lazy" style="background:#111;" />
        <button class="video-play-btn" type="button">▶</button>
      </div>
      <div class="film-info">
        <h3>The Last Rite (傩)</h3>
        <span class="meta-tag">Documentary / Cultural Essay</span>
        <p>placeholder</p>
        <a href="https://youtu.be/Mta2oElLeqY" target="_blank" class="watch-link">Watch on YouTube</a>
      </div>
    </div>

    <div class="film-item reverse">
      <div class="video-box" data-video-id="Q_ud78FqyXA" data-video-url="https://youtu.be/Q_ud78FqyXA">
        <div class="yt-player" aria-hidden="true"></div>
        <img src="cover_unknown.jpg" alt="Unknown" class="video-cover" loading="lazy" style="background:#111;" />
        <button class="video-play-btn" type="button">▶</button>
      </div>
      <div class="film-info">
        <h3>Unknown</h3>
        <span class="meta-tag">Experimental Short</span>
        <p>placeholder</p>
        <a href="https://youtu.be/Q_ud78FqyXA" target="_blank" class="watch-link">Watch on YouTube</a>
      </div>
    </div>
  </section>

  <section id="photography" class="reveal">
    <div class="section-header">
      <h2 class="section-title">Photography</h2>
      <p class="section-desc">Cinematic moments & light studies.</p>
    </div>

    <div class="photo-gallery-5">
      <div class="pg-item"><img src="photo1.jpg" alt="Photo 1" style="background:#ccc" /></div>
      <div class="pg-item"><img src="photo2.jpg" alt="Photo 2" style="background:#aaa" /></div>
      <div class="pg-item"><img src="photo3.jpg" alt="Photo 3" style="background:#999" /></div>
      <div class="pg-item"><img src="photo4.jpg" alt="Photo 4" style="background:#888" /></div>
      <div class="pg-item"><img src="photo5.jpg" alt="Photo 5" style="background:#777" /></div>
    </div>
  </section>

  <section id="art" class="reveal">
    <div class="section-header">
      <h2 class="section-title">Fine Arts</h2>
      <p class="section-desc">Solitude & Spaces: A study of isolation. (Full Collection)</p>
    </div>

    <div class="art-gallery">
      <div class="art-piece"><img src="art1.jpg" alt="Art" /><div class="art-caption">Graduation Isolation (1)</div></div>
      <div class="art-piece"><img src="art4.jpg" alt="Art" /><div class="art-caption">Process: Color Study (4)</div></div>
      <div class="art-piece"><img src="art7.jpg" alt="Art" /><div class="art-caption">Confined Space (7)</div></div>
      <div class="art-piece"><img src="art10.jpg" alt="Art" /><div class="art-caption">Process: Iron Mesh (10)</div></div>
      <div class="art-piece"><img src="art13.jpg" alt="Art" /><div class="art-caption">Dormitory Space (13)</div></div>

      <div class="art-piece"><img src="art2.jpg" alt="Art" /><div class="art-caption">Process: Inspiration (2)</div></div>
      <div class="art-piece"><img src="art5.jpg" alt="Art" /><div class="art-caption">Pressure & Balloons (5)</div></div>
      <div class="art-piece"><img src="art8.jpg" alt="Art" /><div class="art-caption">Process: Test Papers (8)</div></div>
      <div class="art-piece"><img src="art11.jpg" alt="Art" /><div class="art-caption">Night Classroom (11)</div></div>
      <div class="art-piece"><img src="art14.jpg" alt="Art" /><div class="art-caption">Process: Composition (14)</div></div>

      <div class="art-piece"><img src="art3.jpg" alt="Art" /><div class="art-caption">Classroom Corner (3)</div></div>
      <div class="art-piece"><img src="art6.jpg" alt="Art" /><div class="art-caption">Process: Sketch (6)</div></div>
      <div class="art-piece"><img src="art9.jpg" alt="Art" /><div class="art-caption">Survival of the Fittest (9)</div></div>
      <div class="art-piece"><img src="art12.jpg" alt="Art" /><div class="art-caption">Process: Techniques (12)</div></div>
      <div class="art-piece"><img src="art15.jpg" alt="Art" /><div class="art-caption">Corridor Contrast (15)</div></div>
    </div>
  </section>

  <section id="writing" class="reveal">
    <div class="section-header">
      <h2 class="section-title">Screenwriting</h2>
      <p class="section-desc">Original stories & scripts.</p>
    </div>

    <div class="script-container">
      <div class="script-header">
        <h3>The Antique Shop of Time</h3>
      </div>

      <div class="script-body">
        <p>EXT. ANTIQUE SHOP - NIGHT</p>
        <p>The evening wind drifted through the schoolyard, carrying the coolness of early autumn and the sigh of an old dream.</p>
        <br>
        <p style="text-align:center; padding: 20px 0;">KRIS<br>Just me again.</p>
        <br>
        <p>He sighed and turned down a narrow alley he had never taken before. Then he heard it—a melody floating through the air.</p>
      </div>

      <div class="read-more-btn" onclick="openScript()">READ FULL SCRIPT</div>
    </div>
  </section>

  <div id="script-modal">
    <div class="modal-close" onclick="closeScript()">CLOSE</div>
    <div class="full-script">
      <h2 style="text-align:center; margin-bottom:50px;">The Antique Shop of Time</h2>
      <p>The evening wind drifted through the schoolyard, carrying the coolness of early autumn and the sigh of an old dream. The last voices from the playground faded away, leaving only the golden light slowly ebbing from the world.</p>
      <p>Ten-year-old Kris tightened the strap of his backpack. The weight dug into his shoulders, leaving faint marks of pain. He stood by the iron gate as sunlight pooled on his shoes, his shadow stretching long across the ground. Around him, one by one, the children were picked up by their parents. Laughter and footsteps receded into the distance until only silence remained.</p>
      <p>Time, it seemed, had deliberately passed him by. He looked down the familiar street but saw no familiar car.</p>
      <p>“Just me again,” he murmured.</p>
      <p>Countless evenings like this flashed before him— Each time he went home with a smile, only to be greeted by a note taped to the door: <em>Kris, sorry. Mom and Dad have to work late again.</em> The neat handwriting felt like a wall between him and warmth.</p>
      <p>He sighed and turned down a narrow alley he had never taken before. “Maybe a different way home will make things more interesting,” he thought.</p>
      <p>Then he heard it—a melody floating through the air. Delicate, crystalline, like an old music box—but older, deeper, almost alive. Following the sound, he found a half-buried music box hidden among the grass. He brushed off the dirt and gently lifted the lid—</p>
      <p>A burst of golden light exploded outward. A small glowing fairy emerged, wings scattering flecks of light. She circled him once, then darted toward the dark end of the alley. Kris hesitated only for a moment before running after her.</p>
      <p>Through trees, falling leaves, and gathering dusk, he chased until he reached an old building. The door bore a tarnished brass plate: <strong>The Antique Shop of Time.</strong></p>
      <p>As he pushed the door open, a chill wind swept out from within. Under dim yellow light, the shop was filled with clocks. The ticking came from every direction—disordered, yet somehow harmonized.</p>
      <p>“Welcome, young man.” The voice came softly from the shadows. A thin old man stepped forward, wearing a magnifying lens over one eye. “I’ve been waiting a long time for you.”</p>
      <p>Kris shifted awkwardly. “I’m looking for a little fairy… she flew in here.”</p>
      <p>The old man chuckled. “Ah… the fairy only brings children who need more time.” He pointed to the clocks. “Each clock carries its owner’s time—some wished it to move faster, some slower… and some wished it would stop forever.”</p>
      <p>Kris whispered, “I wish time would slow down. Then Mom and Dad could spend more time with me.”</p>
      <p>The old man smiled faintly. “How pure your wish is. Come back after school, every day.”</p>
    </div>
  </div>

  <div id="lightbox" onclick="closeLightbox()">
    <img id="lightbox-img" src="" alt="Preview" />
  </div>

  <footer>
    <p>&copy; 2025 JOYCE ZHANG. VISUAL STORYTELLER.</p>
  </footer>

  <script>
    const observerOptions = {
      root: null,
      rootMargin: "0px",
      threshold: 0.1
    };

    const observer = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add("active");
          observer.unobserve(entry.target);
        }
      });
    }, observerOptions);

    document.querySelectorAll(".reveal").forEach(el => {
      observer.observe(el);
    });

    function openScript() {
      document.getElementById("script-modal").classList.add("active");
      document.body.style.overflow = "hidden";
    }
    function closeScript() {
      document.getElementById("script-modal").classList.remove("active");
      document.body.style.overflow = "auto";
    }

    const lightbox = document.getElementById("lightbox");
    const lightboxImg = document.getElementById("lightbox-img");
    const images = document.querySelectorAll(".pg-item img, .art-piece img");

    images.forEach((img) => {
      img.addEventListener("click", (e) => {
        e.stopPropagation();
        lightboxImg.src = img.src;
        lightbox.style.display = "flex";
        setTimeout(() => lightbox.classList.add("visible"), 10);
      });
    });

    function closeLightbox() {
      lightbox.classList.remove("visible");
      setTimeout(() => (lightbox.style.display = "none"), 300);
    }

    (function () {
      const boxes = document.querySelectorAll(".video-box");
      const playerByBox = new WeakMap();

      const API_LOAD_MAX_MS = 1200;
      const PLAYER_READY_MAX_MS = 2200;

      let apiReady = false;
      let apiPromise = null;

      function isInAppBrowserLikelyBlocked() {
        const ua = navigator.userAgent || "";
        return /MicroMessenger|Weibo|QQ\/|QQBrowser|FBAN|FBAV|Instagram|Line\/|TikTok|Douyin|Kwai|Twitter/i.test(ua);
      }

      function gotoYouTube(url) {
        window.location.href = url;
      }

      function delay(ms) {
        return new Promise((resolve) => setTimeout(resolve, ms));
      }

      function loadYouTubeAPIWithTimeout() {
        if (apiReady) return Promise.resolve();
        if (apiPromise) return apiPromise;

        apiPromise = new Promise((resolve, reject) => {
          if (window.YT && window.YT.Player) {
            apiReady = true;
            resolve();
            return;
          }
          const tag = document.createElement("script");
          tag.src = "https://www.youtube.com/iframe_api";
          tag.async = true;
          tag.onerror = () => reject(new Error("iframe_api load error"));
          document.head.appendChild(tag);
          window.onYouTubeIframeAPIReady = () => {
            apiReady = true;
            resolve();
          };
        });

        return Promise.race([
          apiPromise,
          delay(API_LOAD_MAX_MS).then(() => { throw new Error("iframe_api timeout"); })
        ]);
      }

      function createPlayerForBox(box, readyTimeoutMs) {
        const videoId = box.getAttribute("data-video-id");
        const videoUrl = box.getAttribute("data-video-url");
        const mount = box.querySelector(".yt-player");
        if (!videoId || !videoUrl || !mount) return gotoYouTube(videoUrl);

        if (playerByBox.get(box)) return;

        box.classList.add("is-loading");

        let ready = false;
        let player = null;

        const watchdog = setTimeout(() => {
          if (!ready) {
            try { player && player.destroy && player.destroy(); } catch (_) {}
            box.classList.remove("is-loading");
            gotoYouTube(videoUrl);
          }
        }, readyTimeoutMs);

        try {
          player = new YT.Player(mount, {
            videoId,
            width: "100%",
            height: "100%",
            playerVars: {
              autoplay: 1,
              playsinline: 1,
              rel: 0,
              modestbranding: 1,
              origin: window.location.origin
            },
            events: {
              onReady: (e) => {
                ready = true;
                clearTimeout(watchdog);
                box.classList.remove("is-loading");
                box.classList.add("is-playing");
                try { e.target.playVideo(); } catch (_) {}
              },
              onError: () => {
                clearTimeout(watchdog);
                try { player && player.destroy && player.destroy(); } catch (_) {}
                box.classList.remove("is-loading");
                gotoYouTube(videoUrl);
              }
            }
          });
          playerByBox.set(box, player);
        } catch (_) {
          clearTimeout(watchdog);
          box.classList.remove("is-loading");
          gotoYouTube(videoUrl);
        }
      }

      boxes.forEach((box) => {
        const btn = box.querySelector(".video-play-btn");
        const url = box.getAttribute("data-video-url");

        btn.addEventListener("click", async (e) => {
          e.preventDefault();
          e.stopPropagation();

          if (isInAppBrowserLikelyBlocked()) {
            gotoYouTube(url);
            return;
          }

          try {
            await loadYouTubeAPIWithTimeout();
            if (!window.YT || !window.YT.Player) throw new Error("YT not available");
            createPlayerForBox(box, PLAYER_READY_MAX_MS);
          } catch (_) {
            gotoYouTube(url);
          }
        });

        box.addEventListener("click", (e) => {
          if (box.classList.contains("is-playing")) return;
          if (e.target === btn) return;
          btn.click();
        });
      });
    })();
  </script>
</body>
</html>